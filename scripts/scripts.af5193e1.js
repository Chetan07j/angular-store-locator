"use strict";var app=angular.module("angularTestApp",["angular.filter","ngMap"]);app.controller("MainCtrl",["$scope",function(a){a.stores=[{lat:19.191766,"long":72.9660344,fname:"DG Mobile Service",address:"Shop No 5, Dev prayag CHS, Bhakti Mandir Road, Opp Thanawala Garage, Hariniwas Circle, Thane - 400601",phone:"022-25443357",name:"B2X THANE MUMBAI"},{lat:18.5155098,"long":73.8489701,fname:"Pulse Enterprise Solutions",address:"Shop No 7 , Garud Apartment , 518 , Narayan Peth , Near Modi Ganpati Temple,'Front Of Maharashtra Rashtrabhasha Bhavan, Pune, Maharashtra, '411030",phone:"'02030261117",name:"B2X PUNE2"},{lat:18.5262858,"long":73.8427269,fname:"Kavya Enterprises",address:"Shop-3/4,C Wing,Shrinath Plaza,Dnyaneshwar Paduka Chauk,\nF.C.Road,Shivajinagar,Pune.411005.",phone:2030473030,name:"B2X PUNE 3"},{lat:28.6902444,"long":77.1343118,fname:"Max Mobile Care ",address:"Shop No. 56, 57, Aggarwal City Mall, Pitampura, North Delhi - 110036",phone:9999266600,name:"B2X PITAMPURA DELHI"},{lat:28.6305271,"long":77.0796378,fname:"APS System",address:"UG 7, Westend Tower, District Center, Janakpuri, West Delhi - 110058",phone:9136512345,name:"B2X JANAKPURI DELHI"},{lat:28.6271433,"long":77.2795273,fname:"Vanshika Electronics",address:"WA - 118, Shakarpur Mother Dairy Road, Delhi - 110092",name:"B2X EAST DELHI"},{lat:26.9157724,"long":75.8093011,fname:"Kanchan Infocom",address:"117 Mall 21, Opp Raj Mandir, PanchBati, M.I Road, Jaipur - 302003",phone:9829019021,name:"B2X MI ROAD JAIPUR"},{lat:28.5714138,"long":77.3280835,fname:"Vanshika Electronics",address:"G-7 & 8 Ground Floor, Dharampali Place, Bhoj Mkt, Behind Vinayak Hospital, Noida - 201301",phone:9582443363,name:"B2X BHOJ MARKET NOIDA"},{lat:28.6627029,"long":77.4349815,fname:"Immortal Services",address:"92, 1st Floor, Ambedkar Road, Near Kalka Garhi Chowk, Ghazibad, UP - 201001",phone:"0120-2791122",name:"B2X GHAZIABAD"},{lat:28.5027291,"long":77.0290977,fname:"Novatta Innovatie",address:"GF-13 Spanish Court, Ansal Palam Vihar,Gurgaon - 122017",phone:9873583020,name:"B2X ANSAL PALAM GURGAON"},{lat:28.4805,"long":77.3104,fname:"Viaan Services",address:"SCF 143, 1st  Floor, HUDA Market, Sector-37 Faridabad, Haryana - 121003",phone:1294103222,name:"B2X SEC 37 FARIDABAD"}],a.downloadReport=function(a,b){var c="object"!=typeof a?JSON.parse(a):a,d="";if(b){var e="";for(var f in c[0])e+=f+",";e=e.slice(0,-1),d+=e+"\r\n"}for(var g=0;g<c.length;g++){var e="";for(var f in c[g])e+='"'+c[g][f]+'",';e.slice(0,e.length-1),d+=e+"\r\n"}if(""==d)return void alert("Invalid data");var h="StoreList",i="data:text/csv;charset=utf-8,"+escape(d),j=document.createElement("a");j.href=i,j.style="visibility:hidden",j.download=h+".csv",document.body.appendChild(j),j.click(),document.body.removeChild(j)},a.$on("mapInitialized",function(b,c){a.objMapa=c}),a.showInfoWindow=function(b,c){var d=new google.maps.InfoWindow,e=new google.maps.LatLng(c.lat,c["long"]);d.setContent("<h4>"+c.name+"</h4><br /> "+c.address),d.setPosition(e),d.open(a.objMapa)}}]),angular.module("angularTestApp").run(["$templateCache",function(a){a.put("views/main.html",'<div class="row" style="text-align: center"> <div class="col-md-2"></div> <div class="col-md-4" style="text-align: center"> <div class="form-group"> <label for="">Search Store:</label> <input type="text" ng-model="search" class="form-control" placeholder="Search Store"> </div> </div> <div class="col-md-4"> <br> <button type="button" class="btn btn-success" ng-click="downloadReport(stores, true)">Download Stores</button> </div> <div class="col-md-2"></div> <!-- <li ng-repeat="store in stores | fuzzy: search">\n    {{ store }}\n  </li> --> </div> <div class="row"> <div class="col-md-6"> <div class="table-responsive"> <table class="table table-striped table-bordered"> <thead> <tr> <th>Name</th> <th>Address</th> <th>Contact Person</th> <th>Contact</th> </tr> </thead> <tbody> <tr ng-repeat="store in stores | fuzzy: search"> <td>{{ store.name }}</td> <td>{{ store.address }}</td> <td>{{ store.phone }}</td> <td>{{ store.fname }}</td> </tr> </tbody> </table> </div> </div> <div class="col-md-6"> <ng-map zoom="3" class="ng-map" center="[21.00,78.00]"> <marker ng-repeat="store in stores | fuzzy: search" position="{{store.lat}}, {{store.long}}" data="{{store[$index]}}" on-click="showInfoWindow(event, store)" title="{{store.Name}}"></marker> </ng-map> </div> </div>')}]);